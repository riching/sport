﻿<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8"/>
    <title>眼球运动动画</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/style.css"/>
    <script type="text/javascript" src="utils/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="utils/utils.js"></script>
    <script type="text/javascript" src="utils/shap.js"></script>
</head>

<body>
	<div class="menu">
	    <input type="button" onclick="changeBg()" value="换背景" /><br />
	    <input id="add" type="button" value="+" />
	    <input id="reset" type="button" value="=" />
	    <input id="dec" type="button" value="-" />
	    <br />
	    <input id="bigger" type="button" value="r+" />
	    <input id="resetR" type="button" value="r=" />
	    <input id="smaller" type="button" value="r-" />
	    <br />
	    <audio controls="controls" >
		  <source src="music/Stay Here Forever.mp3" type="audio/mp3" />
		</audio>
	</div>
	<h1>眼球运动动画</h1>
	<canvas id="canvas" width="800" height="600"></canvas>
	<script type="text/javascript" src="utils/animation_mode.js"></script>
	<script>
		var ball = new Ball();
		window.onload = function() {
			var h = screen.height - 150;
			var w = screen.width - 20;
			canvas = document.getElementById('canvas');
			canvas.setAttribute("width",w);
			canvas.setAttribute("height",h);
		        context = canvas.getContext('2d');
		        
		        fns = new Array();
		        fns.push(AM.circleInit);
		        fns.push(AM.updownInit);
		        fns.push(AM.circleInit);
		        fns.push(AM.leftrightInit);
		        fns.push(AM.circleInit);
		        fns.push(AM.waveInit);
		        fns.push(AM.circleInit);
		        //fns.push(AM.pulseInit);
		        fns.push(AM.randomMoveInit);
		        fns.push(AM.circleInit);
		        fns.push(AM.ovalInit);
		        currentIndex = 0;
		        fn = fns[currentIndex](canvas, ball);
		        (function drawFrame() {
		            window.requestAnimationFrame(drawFrame, canvas);
		            context.clearRect(0, 0, canvas.width, canvas.height);
		            fn(canvas, context, ball);
		        }());
		        setInterval(changeMode, 15000);
		
		        function changeMode() {
		            currentIndex += 1;
		            if (currentIndex >= fns.length) {
		                currentIndex = 0;
		            }
		            fn = fns[currentIndex](canvas, ball);
		        }
	
		}
	 	$("#add").click(
			function() {
				ball.speedMulti += ball.speedMulti / 10;
			}
		);
		$('#reset').click(
			function() {
				ball.speedMulti = 1;
			}
		);
		$("#dec").click(
			function() {
				ball.speedMulti -= ball.speedMulti / 10;
			}
		);
		$("#bigger").click(
			function(){ball.radius += ball.radius * 0.2;}
		);
		$("#resetR").click(
			function(){ball.radius = 5;}
		);
		$("#smaller").click(
			function(){ball.radius -= ball.radius * 0.2;}
		);
	</script>
</body>
</html>
